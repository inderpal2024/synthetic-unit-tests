<!DOCTYPE html>
<html>
<head>
<title>Reaction Time Test</title>
<style>
#shape {
  width: 200px;
  height: 200px;
  background-color: blue;
  margin: 50px auto;
  cursor: pointer;
}

#result {
  text-align: center;
  font-size: 20px;
  margin-top: 20px;
}
</style>
</head>
<body>

<div id="shape"></div>
<div id="result"></div>

<script>
let start_time;
let clicked = false;

function getRandomDelay() {
  return Math.random() * 3000 + 1000; // Delay between 1 and 4 seconds
}

function startGame() {
  clicked = false;
  document.getElementById("result").textContent = "Wait for the color change...";
  document.getElementById("shape").style.backgroundColor = "blue";

  setTimeout(() => {
    start_time = new Date().getTime();
    document.getElementById("shape").style.backgroundColor = "red";

  }, getRandomDelay());


}


document.getElementById("shape").onclick = function() {
    if (!start_time) {
      document.getElementById("result").textContent = "Too early! Click to try again.";
        document.getElementById("shape").style.backgroundColor = "blue";

        this.onclick = function() {
            start_time = null;
            startGame();
             this.onclick = null;
        }

      return;

    }


  if(!clicked){
      let end_time = new Date().getTime();
    let reaction_time = (end_time - start_time) / 1000;
    document.getElementById("result").textContent = "Your reaction time: " + reaction_time + " seconds.";

    start_time= null;
     this.onclick = function(){
        startGame()
         this.onclick = null;

    }

    clicked = true;
  }



}


startGame();
</script>

</body>
</html>